<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="icon/Realm_transparent2.png" type="image/x-icon">
    <title>Register</title>
</head>
<body>
    <center class="middle">
        <h1 align="left">REALM</h1>
        <form id="registerForm" action="" method="post">
            <fieldset>
                <legend>Username</legend>
                <input type="text" name="usernameRegister" placeholder="(or Use instgram profile url)" id="usernameRegister">
            </fieldset>
            <fieldset>
                <legend>Name</legend>
                <input type="text" name="nameRegister" id="nameRegister">
            </fieldset>
            <fieldset>
                <legend>Password</legend>
                <input type="password" name="passwordRegister" id="passwordRegister">
            </fieldset>
            <fieldset class="gender">
                <legend>Gender</legend>
                <input type="radio" name="genderRegister" value="male" id="maleGenderRegister">
                <label for="maleGenderRegister">Male</label>
                <input type="radio" name="genderRegister" value="female" id="femaleGenderRegister">
                <label for="femaleGenderRegister">Female</label>
                <input type="radio" name="genderRegister" value="other" id="otherGenderRegister">
                <label for="otherGenderRegister">Other (or Not prefere to ask)</label>
            </fieldset>
            <p align="right">
                <button type="submit" id="registerButton">Register</button>
            </p>
        </form>
    </center>
    <script>
document.getElementById('registerForm').addEventListener('submit', function(event) {
    event.preventDefault();
    const usernameRegister = document.getElementById('usernameRegister');
    const password = document.getElementById('passwordRegister');
    const nameRegister = document.getElementById('nameRegister');
    const maleGenderRegister = document.getElementById('maleGenderRegister');
    const femaleGenderRegister = document.getElementById('femaleGenderRegister');
    const otherGenderRegister = document.getElementById('otherGenderRegister');

    function checkInstagram(inputString) {
        var pattern = new RegExp('^(https?:\\/\\/)?(www\\.)?instagram\\.com\\/([A-Za-z0-9_.]+)\\/?');
        var match = inputString.match(pattern);
        if (match) {
            return match[3];  // Return the username part of the URL
        } else {
            return inputString;  // It's not a URL, so we assume it's a username
        }
    }

    if (password.value.length < 8 || checkInstagram(usernameRegister.value).length < 1 || checkInstagram(usernameRegister.value).length > 80 || nameRegister.value.length < 1 || nameRegister.value.length > 80 || (!maleGenderRegister.checked && !femaleGenderRegister.checked && !otherGenderRegister.checked)) {
        alert('Please fill the field');
    } else {
        console.log("Ready to submit");
        document.getElementById('registerForm').action = "https://spyderfalcon.42web.io/new/register";
        document.getElementById('registerForm').submit();
    }
});
    </script>
</body>
</html>
